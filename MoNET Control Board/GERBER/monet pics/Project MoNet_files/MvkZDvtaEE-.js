if (self.CavalryLogger) { CavalryLogger.start_js(["VmVOI"]); }

__d('ClickPointIdentifiersDEPRECATED',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function i(j){return '{"ua_id":"'+j+'"}';}};f.exports=h;}),null);
__d('UFISubscribeLink.react',['fbt','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.subscribeAction?h._("Turn On Notifications"):h._("Turn Off Notifications"),n=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (c('React').createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:n,onClick:this.props.onClick},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={subscribeAction:k.bool,onClick:k.func};f.exports=l;}),null);
__d('UFIActionLinkController',['cx','Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceAction','UFILikeActionLink.react','UFIReactionStore','UFIShareActionLink.react','UFISharedDispatcher','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelPagedCommentList','UFIUserActions','UFIPrivateReplyLink.react'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m){var n=c('DOMQuery').scry(k,l)[0];if(n){var o=document.createElement('span');n.parentNode.replaceChild(o,n);o.appendChild(n);if(typeof m==='function')m(o);}else var p=c('Arbiter').subscribe('PhotoSnowlift.DATA_CHANGE',function(){c('Arbiter').unsubscribe(p);i(k,l,m);},c('Arbiter').SUBSCRIBE_NEW);}var j=function k(l,m,n){this._root=l;this._contextArgs=m;this._ftFBID=n.targetfbid;this._isOnTimeline=this._isRenderingOnTimeline();this._dispatcher=new (c('UFIDispatcher'))();this._stores={UFIReactionStore:new (c('UFIReactionStore'))(this._dispatcher)};if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(n.viewercanlike||n.hasviewerliked)this._attemptInitializeLike();if(n.cancomment)this._attemptInitializeComment();if(n.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();this._attemptInitializeInlineSearchFeedback();this._attemptInitializeActorSelector();c('UFICentralUpdates').subscribe('feedback-updated',function(o,p){var q=p.updates;if(m.ftentidentifier in q)this.render();}.bind(this));c('UFICentralUpdates').subscribe('instance-updated',function(o,p){var q=p.updates[this._contextArgs.instanceid];if(q&&q.commentsToggling)this.render();}.bind(this));this.render();};Object.assign(j.prototype,{_attemptInitializeBling:function k(){i(this._root,'^form .uiBlingBox',function(l){this._blingRoot=l;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function k(){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(l){var m=c('DOMQuery').scry(l,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=!!m;var n=c('DOMQuery').scry(l,'.fbTimelineFeedbackComments')[0];this._enableShowComments=!!n;}this._blingTimelineRoot=l;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeInlineSearchFeedback:function k(){i(this._root,'^form .inline_feedback',function(l){this._inlineSearchRoot=l;if(this._dataReact)this._renderInlineSearchFeedback();}.bind(this));},_attemptInitializeActorSelector:function k(){i(this._root,'^form .actor_selector',function(l){this._actorSelectorRoot=l;if(this._dataReact)this._renderActorSelector();}.bind(this));},_attemptInitializeLike:function k(){i(this._root,'^form .like_link',function(l){this._likeRoot=l;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeComment:function k(){i(this._root,'^form .comment_link',function(l){this._commentRoot=l;if(this._dataReady)this._renderComment();}.bind(this));},_attemptInitializeSubscribe:function k(){i(this._root,'^form .unsub_link',function(l){this._subscribeRoot=l;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeMessageReply:function k(){i(this._root,'^form .message_reply_action_link',function(l){this._messageReplyRoot=l;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}.bind(this));},_attemptInitializeShare:function k(){i(this._root,'^form .share_action_link',function(l){this._shareRoot=l;c('CSS').addClass(this._shareRoot,"share_root");var m=c('DOMQuery').scry(this._shareRoot,'.share_action_link')[0];if(m){this._shareURI=m.getAttribute('href');this._shareRel=m.getAttribute('rel');this._shareNowMenuURI=c('DataStore').get(m,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}.bind(this));},render:function k(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();this._renderInlineSearchFeedback();this._renderActorSelector();},_renderBling:function k(){if(this._blingRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._blingBox=c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getBling(l)),this._blingRoot);}.bind(this));},getBling:function k(l){return (c('React').createElement(c('UFIBling.react'),{contextArgs:this._contextArgs,feedbackTarget:l,onCommentVisibilityChanged:function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this._contextArgs.instanceid));}.bind(this)}));},_renderTimelineBling:function k(){if(this._blingTimelineRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(this.getTimelineBling(l),this._blingTimelineRoot);}.bind(this));},getTimelineBling:function k(l){var m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=c('ClickPointIdentifiersDEPRECATED').getUserActionID(c('ClickPointIdentifiersDEPRECATED').types.TIMELINE_SEE_LIKERS),o=function q(event){var r=c('Parent').byTag(event.target,'form');c('CommentPrelude').uncollapse(r,'action_link_timeline_bling');var s=c('DOMQuery').scry(r,'a.UFIPagerLink');if(s.length)s[0].click();event.preventDefault();},p=c('UFIToplevelPagedCommentList').getDisplayedCommentCountForFeedbackTargetID_UNSAFE(this._contextArgs.ftentidentifier);return (c('React').createElement(c('UFITimelineBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,commentOnClick:o,contextArgs:this._contextArgs,'data-ft':m,'data-gt':n,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:l.likecount,likesreduced:l.likecountreduced,reshares:l.sharecount,resharesreduced:l.sharecountreduced,actorid:l.actorid}));},_renderInlineSearchFeedback:function k(){if(this._inlineSearchRoot)c('ReactDOM').render(this.getInlineSearchFeedback(),this._inlineSearchRoot);},getInlineSearchFeedback:function k(){return (c('React').createElement('div',null,c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinkController')},this._contextArgs.inlineSearchFeedbackConfig))));},_renderActorSelector:function k(){if(this._actorSelector)c('ReactDOM').render(this.getActorSelector(),this._actorSelectorRoot);},getActorSelector:function k(){var l=this._contextArgs.actorSelectorConfig,m=l.module,n=l.props;n.nuxHoverContext=c('Parent').byTag(event.target,'form');return (c('React').createElement(m,n));},_renderLike:function k(){if(this._likeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getLike(l)),this._likeRoot);}.bind(this));},getLike:function k(l){return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:l,contextArgs:this._contextArgs}));},_renderComment:function k(){if(this._commentRoot)this._commentLink=c('ReactDOM').render(this.getComment(),this._commentRoot);},getComment:function k(){return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this._contextArgs}));},_renderMessageReply:function k(){if(this._messageReplyRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._messageReplyLink=null;var m=this.getMessageReply(l);if(m)this._messageReplyLink=c('ReactDOM').render(m,this._messageReplyRoot);if(!this._messageReplyLink||!c('ReactDOM').findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';c('DOM').setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}.bind(this));},getMessageReply:function k(l){if(l.messagereplycontext)return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:l.actorforpost,activityID:this._contextArgs.ftentidentifier,context:l.messagereplycontext,seeResponseLabel:false}));return null;},_renderSubscribe:function k(){if(this._subscribeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._subscribeLink=c('ReactDOM').render(this.getSubscribe(l),this._subscribeRoot);}.bind(this));},getSubscribe:function k(l){var m=!l.hasviewersubscribed,n=function(event){c('UFIUserActions').changeSubscribe(this._contextArgs.ftentidentifier,m,{source:this._contextArgs.source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:l.commentexpandmode});event.preventDefault();}.bind(this);return (c('React').createElement(c('UFISubscribeLink.react'),{onClick:n,subscribeAction:m}));},_renderShare:function k(){if(this._shareRoot&&this._shareURI)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._shareLink=c('ReactDOM').render(this.getShare(l),this._shareRoot);}.bind(this));},getShare:function k(l){return (c('React').createElement(c('UFIShareActionLink.react'),{feedbackTarget:l,ufiInstanceID:this._contextArgs.instanceid,shareURI:this._shareURI,shareRel:this._shareRel,shareNowMenuURI:this._shareNowMenuURI}));},_isRenderingOnTimeline:function k(){if(this._contextArgs.source===c('UFIConstants').UFIFeedbackSourceType.PROFILE){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return l.length>0;}return false;}});f.exports=j;}),null);