if (self.CavalryLogger) { CavalryLogger.start_js(["Dz0J1"]); }

__d('ArtillerySWDataCollector',['Promise','ClientServiceWorkerMessage','pageLoadedViaSWCache'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={collect:function j(){return new (c('Promise'))(function(k,l){if(!c('pageLoadedViaSWCache')()){k();return;}var m=false,n=new (c('ClientServiceWorkerMessage'))('asw-pageTraceDataRequest',null,function(o){var p=o.data,q=p.command,r=p.data;if(m)return;m=true;if(q==='trace'&&r.traceData){h=r.traceData;k(r.traceData);return;}k(h);});n.sendViaController();});}};f.exports=i;}),null);
__d('ReactBlueBarPerfLogger',['regeneratorRuntime','Arbiter','ArtillerySWDataCollector','BanzaiScuba','BanzaiServiceWorker','BigPipe','ClientChromeExperimentsData','LogBuffer','NavigationMetrics','PageletEventConstsJS','ServiceWorkerExperimentPerfTypedLogger','SubscriptionsHandler','pageLoadedViaSWCache','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='reactbluebar_perf',i='navigationStart',j='fetchStart',k='domainLookupStart',l='connectStart',m='connectEnd',n='responseStart',o='responseEnd',p='domLoading',q='domInteractive',r='domContentLoadedEventEnd',s='domComplete',t='unloadEventStart',u='unloadEventEnd',v={},w=function y(z){var aa,ba=this,ca,da,ea,fa,ga;return c('regeneratorRuntime').async(function ha(ia){while(1)switch(ia.prev=ia.next){case 0:ca=new (c('BanzaiScuba'))(h,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addRequestFields:true});da=new (c('ServiceWorkerExperimentPerfTypedLogger'))();da.setExperimentType(z.experimentName);da.setIsSecondLoad(z.isSecondLoad);da.setLoadedViaSwCache(c('pageLoadedViaSWCache')());ea=/sw_fnr_id=\d+&?/;fa=!!location.search&&ea.test(location.search);da.setIsSwFnrLoad(fa);ca.addInteger('sw_fnr_load',fa?1:0);ca.addNormal('experiment_type',z.experimentName);ca.addNormal('page_client',z.page);ca.addNormal('response_type',c('pageLoadedViaSWCache')()?'sw':'server');ca.addNormal('second_load',z.isSecondLoad);ca.addNormal('temp_logger_type',c('BanzaiServiceWorker').isEnabled()?'background_sync':'normal');ga={};if(c('ClientChromeExperimentsData').shouldShowClientChrome)ga.client_chrome=1;ca.addTagset('gk_on',ga);if(!c('performance').timing){ia.next=20;break;}ia.next=20;return c('regeneratorRuntime').awrap(function ja(){var ka,la,ma,na,oa,pa,qa,ra,sa,ta;return c('regeneratorRuntime').async(function ua(va){while(1)switch(va.prev=va.next){case 0:ka=c('performance').timing;la=ka.navigationStart;ma=ka.fetchStart;da.setFetchStartMs(ma);da.setNavStartMs(la);ca.addInteger('tti',z.tti-ma);ca.addInteger('e2e',z.e2e-ma);ca.addInteger('display_done',z.displayDone-ma);if(z.rbbDisplayDone)ca.addInteger('rbb_display_done',z.rbbDisplayDone-ma);if(z.bodyVisible)ca.addInteger('body_visible',z.bodyVisible-ma);if(typeof b._cstart==='number')ca.addInteger('cstart',b._cstart-ma);va.next=13;return c('regeneratorRuntime').awrap(c('ArtillerySWDataCollector').collect());case 13:na=va.sent;if(!na){va.next=27;break;}oa=na.segments.filter(function(wa){return wa.description==='cached_header_response'||wa.description==='navigation_response';});pa=0;case 17:if(!(pa<oa.length)){va.next=27;break;}qa=oa[pa].begin;ra=oa[pa].end;if(!(!qa||!ra)){va.next=22;break;}return va.abrupt('continue',24);case 22:ca.addInteger(oa[pa].description+'.begin',qa-la);ca.addInteger(oa[pa].description+'.end',ra-la);case 24:pa++;va.next=17;break;case 27:ca.addInteger('tti_navs',z.tti-la);da.setTti(z.tti-la);ca.addInteger('e2e_navs',z.e2e-la);da.setE2e(z.e2e-la);ca.addInteger('display_done_navs',z.displayDone-la);da.setDisplayDone(z.displayDone-la);if(z.rbbDisplayDone){sa=z.rbbDisplayDone;ca.addInteger('rbb_display_done_navs',sa-la);da.setRbbDisplayDone(sa-la);}if(z.bodyVisible){ta=z.bodyVisible;ca.addInteger('body_visible_navs',ta-la);da.setBodyVisible(ta-la);}if(typeof b._cstart==='number'){ca.addInteger('cstart_navs',b._cstart-la);da.setCsstart(b._cstart-la);}Object.keys(v).forEach(function(wa){ca.addInteger('pagelet_arrive_'+wa,v[wa]-ma);ca.addInteger('pagelet_arrive_'+wa+'_navs',v[wa]-la);if(wa==='first_response'||wa==='last_response'||wa==='substream_0'||wa==='substream_1'){var xa={};xa[wa]=v[wa]-la;da.updateData(xa);}});[{name:'redirect',start:i,end:j},{name:'app_cache',start:j,end:k},{name:'dns',start:k,end:l},{name:'tcp',start:l,end:m},{name:'request',start:m,end:n},{name:'respond',start:n,end:o},{name:'dom_setup',start:n,end:p},{name:'dom_interactive_load',start:p,end:q},{name:'dom_content_load',start:q,end:r},{name:'dom_complete',start:r,end:s},{name:'unload',start:t,end:u}].forEach(function(wa){var xa=wa.name,ya=wa.start,za=wa.end,ab=c('performance').timing[ya]||0,bb=c('performance').timing[za]||0;if(bb>=ab){ca.addInteger('perf_timing_'+xa,bb-ab);var cb={};cb[xa]=bb-ab;da.updateData(cb);}});case 38:case 'end':return va.stop();}},null,ba);}());case 20:ca.post();da.log();case 22:case 'end':return ia.stop();}},null,this);},x={init:function y(z){var aa=z.isSecondLoad,ba=z.experimentName,ca=z.waitForRBB,da=null,ea=new (c('SubscriptionsHandler'))();ea.addSubscriptions(c('Arbiter').subscribe('sw/bodyVisible',function(fa,ga){var ha=ga.relativeTime;if(c('performance').timing)da=ha+c('performance').timing.navigationStart;}));ea.addSubscriptions(c('Arbiter').subscribe(c('BigPipe').Events.init,function(fa,ga){var ha=ga.arbiter,ia=ha.subscribe('pagelet_event',function(ja,ka){var event=ka.event,la=ka.id,ma=ka.ts;if(event!==c('PageletEventConstsJS').ARRIVE_START||typeof ma!=='number')return;var na=['first_response','last_response','pagelet_welcome_box','pagelet_dock','pagelet_navigation','pagelet_composer','substream_0','substream_1','pagelet_ego_pane','webgraphql_preloader_ReactBlueBarJewelsDataPreloader',{regex:/^topnews_main_stream_(\d+)$/,name:'topnews_main_stream'},{regex:/^hyperfeed_story_id_(\d+)$/,name:'hyperfeed_story'}],oa=null;for(var pa=na,qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++];}else{ra=pa.next();if(ra.done)break;sa=ra.value;}var ta=sa;if(typeof ta==='string'){if(ta===la){oa=ta;break;}}else if(ta.regex.test(la)){oa=ta.name;break;}}if(oa&&!v[oa])v[oa]=ma;});ea.addSubscriptions(ia);}));ea.addSubscriptions(c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(fa,ga){var ha=ga.page,ia=ga.pageType,ja=ga.tti,ka=ga.e2e,la=ga.all_pagelets_displayed;ia=ia||'normal';if(ia!=='normal')return;ea.release();var ma=function na(oa){var pa=oa.displayDone;w({bodyVisible:da,rbbDisplayDone:pa,displayDone:la,e2e:ka,page:ha,pageType:ia,tti:ja,isSecondLoad:aa,experimentName:ba});};if(ca){c('LogBuffer').tail('reactbluebar_perf',ma);}else ma({displayDone:null});}));}};f.exports=x;}),null);
__d('ServiceWorkerURLCleaner',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/sw_fnr_id=\d+&?/,i={removeRedirectID:function j(){if(location.search&&h.test(location.search))if(history!==undefined&&typeof history.replaceState==='function'){var k=location.toString().replace(h,'').replace(/\?$/,'');history.replaceState({},document.title,k);}}};f.exports=i;}),null);